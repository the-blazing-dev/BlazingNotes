@page "/trash"
@using BlazingNotes.Logic.Services
@inject IState<AppState> AppState

<PageTitle>Trash</PageTitle>

<MudStack Spacing="6">
    <MudStack Row AlignItems="AlignItems.Center">
        @* todo check why it is completely different to native <h1> *@
        @* todo think about placing the title in the navbar *@
        <MudText Typo="Typo.h4" Color="Color.Primary">Trash</MudText>

        <MudTextField @bind-Value="_search"
                      Variant="Variant.Outlined"
                      AutoFocus
                      Label="Search"
                      Margin="Margin.Dense"
                      Immediate
                      Class="flex-grow-0"/>
    </MudStack>

    @{
        var all = AppState.Value.Notes.Where(x => x.DeletedAt.HasValue).ToList();
        var (longEnough, highlightText, matches) = NoteSearcher.Search(all, _search);

        <NoteCardList Notes="matches"
                      SearchText="@highlightText"
                      NoNotesText="No items in trash"/>
    }
</MudStack>

@code {

    string _search = "";

}