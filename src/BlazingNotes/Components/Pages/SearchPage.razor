@page "/search"
@inject IState<AppState> AppState

<PageTitle>Search</PageTitle>

<MudStack Spacing="6">
    @* todo check why it is completely different to native <h1> *@
    @* todo think about placing the title in the navbar *@
    <MudTextField @bind-Value="_search"
                  Variant="Variant.Outlined"
                  AutoFocus
                  Label="Search"
                  Immediate/>

    @* for now just misuse the expansion panel *@
    <MudCard Style="background-color: var(--mud-palette-appbar-background)">
        <MudCardContent Class="pa-6">

            @if (_search.Trim().Length >= 3)
            {
                var matches = AppState.Value.Notes.Where(x => x.Text.ContainsIgnoreCase(_search.Trim()));
                <NoteCardList Notes="matches"/>
            }
            else
            {
                <MudAlert Severity="Severity.Info">
                    Bitte einen Suchbegriff mit mindestens 3 Zeichen eingeben
                </MudAlert>
            }

        </MudCardContent>
    </MudCard>

</MudStack>

@code {

    string _search = "";

}